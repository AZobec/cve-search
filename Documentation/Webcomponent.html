<!DOCTYPE html>
<html>
<head>
  <title>Setup web-component - CVE-Search</title>

  <meta charset="utf-8">

  <link href="./css/style.css" rel="stylesheet" />
</head>

<body>

  <h1>Setup the web-component for CVE-Search</h1>

  <p>
    This document will explain how to set up the web-component for CVE-Search. 
    This documentation assumes you have installed all the components of CVE-Search and ran the first initialization scripts.
  </p>

  <h2>Settings</h2>

  <p>
    Before we start the web server, we will go over the settings in the configuration.ini file, and explain what every setting means.
    The settings for the web-server can be found under the head <span class="highlight">[Webserver]</<pan>
    <table>
      <thead>
        <tr><td>Setting</td> <td>Default setting</td> <td>Explanation</td></tr>
      </thead>
      <tr><td>Host</td> <td>127.0.0.1</td> <td>The address by which the web-server is accessible. Either loop-back or one of the machine's IP addresses</td> </tr>
      <tr><td>Port</td> <td>5000</td> <td> The port on which the web-server will be running </td></tr>
      <tr><td>Debug</td> <td>True</td> <td>When the server runs in debug mode, SSL will be turned off and the web-server will be in <span title="The server will process only one request at a time and block the others until the current one is ready">Blocking Mode</span></td></tr>
      <tr><td>PageLength</td> <td>50</td> <td>The amount of results that will be displayed per page</td></tr>
      <tr><td>LoginRequired</td> <td>False</td> <td>Decides whether <a href="#users">users</a> have to log in to access <a href="#admin_pages">admin pages</a>.</td></tr>
      <tr><td>SSL</td> <td>False</td> <td>Decides whether SSL is used to secure the connection. See <a href="#ssl">SSL</a> for more information on how to set this up</td></tr>
      <tr><td>Certificate</td> <td>ssl/cve-search.crt</td> <td> The certificate used for the SSL connection. More info under <a href="#ssl">SSL</a></td></tr>
      <tr><td>Key</td> <td>ssl/cve-search.key</td> <td> The key used for the SSL connection. More info under <a href="#ssl">SSL</a></td></tr>
    </table>
  </p>

  <h2>Users and Login</h2>
  <p id="users">
    If you decide to make use of CVE-Search's login system, you will need to add users to the user-list. To do this, you'll be using the <span class="code">db_mgmt_admin.py</span> script. <br />
    This script takes several parameters, as mentioned below:
    <table>
      <thead>
        <tr><td>Parameter</td> <td>Arguments</td> <td>Explanation</td></tr>
      </thead>
      <tr><td>-h, --help</td> <td>None</td> <td>Displays the help page</td></tr>
      <tr><td>-a A</td> <td>name of user</td> <td>Add a user account</td></tr>
      <tr><td>-c C</td> <td>name of user</td> <td>Change the password of a user</td></tr>
      <tr><td>-r R</td> <td>name of user</td> <td>Remove a user account</td></tr>
      <tr><td>-p P</td> <td>name of user</td> <td>Promote a user account to <a href="#master">Master</a></td></tr>
      <tr><td>-d D</td> <td>name of user</td> <td>Demote a user account to a normal user </td></tr>
    </table>
  </p>
  <h3>Master accounts</h3>
  <p id="master">
    The first account that you add will automatically be a Master account. Master accounts are accounts with the previlege to add, remove, promote and demote other user accounts.
    Every user can access the admin pannel, regardless whether he has a Master account or not.
  </p>
  <h3>Creating accounts</h3>
  <p>
    You can create a user account by using the command <span class="code">Python3 db_mgmt_admin.py -a user</span>, where user is the name of your account. <br />
    If this is the first account in the database, the script will not require a <a href="#master">Master</a> password, and the account created will be a Master account.
    If this is not the first account, the script will ask you to log in using a Master account, before you can proceed.<br />
    Next, the script will ask you for a new password for the user. You will not see the characters when you type the password. This is to protect the user's password from spying eyes.
    After verifying the password, the user account will be created.
  </p>
  <h3>Changing account passwords</h3>
  <p>
    Every user can change his or her password by typing <span class="code">Python3 db_mgmt_admin.py -c user</span>, where user is the name of your account. </br />
    Running this script will ask you the current password of your user account. After entering this password, it will ask you to type your new password twice.
    After you typed your new password, the user will be updated, and the new password will be stored.
  </p>
  <h3>Removing accounts</h3>
  <p>
    Master accounts can remove users by typing <span class="code">Python3 db_mgmt_admin.py -r user</span>, where user is the name of the account. <br />
    Removing an accound requires a Master account to log in. If the account you're trying to remove is not the last Master account, it will not be removed. 
  </p>
  <h3>Promoting accounts</h3>
  <p>
    Master accounts can promote other accounts by typing <span class="code">Python3 db_mgmt_admin.py -p user</span>, where user is the name of the account. <br />
    Promoting a user grants this user the privileges to add, remove, promote and demote other users.
  </p>
  <h3>Demoting accounts</h3>
  <p>
    Master accounts can demote him/herself or other accounts by typing <span class="code">Python3 db_mgmt_admin.py -d user</span>, where user is the name of the account. <br />
    If the account you're trying to demote is the last Master account, it won't work. Demoting users reduces their privileges to that of a normal user, so he/she can only change his or her own password.
  </p>

  <h2>SSL - Secure Socket Layer</h2>
  <p id="ssl">
    The use of SSL will make sure your users trafic can not be sniffed. This will make sure people with bad intentions can't get user passwords or any other information.
  </p>
  <h3>Setting up SSL</h3>
  <p>
    To set up SSL on your server, you need a certificate and a key. On Linux, you can create these by running the following command: <br />
    <span class= "code">openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /ssl/cve-search.key -out /ssl/cve-search.crt</span> <br />
    The parameter <span class="code">-days</span> lets you choose the duration the certificate must be valid. In this example, this is 365 days. <br />
    The parameter <span class="code">-newkey</span> lets you choose the algorithm and length of the key and certificate. If you don't know what you're doing, use the default value. <br />
    The parameter <span class="code">-keyout</span> is the output of your new SSL key. Make sure this location is the same as the <span class="code">Key</span> value of your configuration.ini file. <br />
    The parameter <span class="code">-out</span> is the output for your new SSL certificate. Make sure this location is the same as the <span class="code">Certificate</span> value of your configuration.ini file. <br />
    <br />
    After hitting the Enter key, you'll be requested to fill out your organizational information. This will be visible on the certificate, and will be a way for your users to verify your certificate, as this will be <span title="Self-signed certificates are certificates that are not validated by external sources.">self-signed</span>.
    When users surf to your website, they will get a warning, and they will have to accept this certificate.
  </p>
</body>

</html> 
