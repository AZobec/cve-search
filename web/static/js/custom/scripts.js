//Search function
function redirect() {
  var url = "/cve/" + document.getElementById("search").value.toUpperCase(); window.location = url;
}

//Bootstrap tooltip
jQuery(function () {
  $("[rel='tooltip']").tooltip();
});

//Back To Top
jQuery(document).ready(function() {
  var offset = 220;
  var duration = 500;
  jQuery(window).scroll(function() {
    if (jQuery(this).scrollTop() > offset) {
      jQuery('.back-to-top').fadeIn(duration);
    } else {
      jQuery('.back-to-top').fadeOut(duration);
    }
  });
  jQuery('.back-to-top').click(function(event) {
    event.preventDefault();
    jQuery('html, body').animate({scrollTop: 0}, duration);
    return false;
  })
});

//Selectable table
$(document).ready(function() {
  var table = $('#CVEs');
  var duration = 500;
  $('#CVEs tbody').on( 'click', 'tr', function () {
    $(this).toggleClass('selected');
    var rows= $('#CVEs tbody tr.selected');
    if (rows.length > 0) {
      jQuery('.select-submit').fadeIn(duration);
    } else {
      jQuery('.select-submit').fadeOut(duration);
    }
  });
  $('.select-submit').click( function () {
    var rows= $('#CVEs tbody tr.selected');
    var cvelist=[];
    for (i=0;i<rows.length;i++){
      cvelist.push(rows[i].cells[1].innerHTML.replace(/<\/?[^>]+(>|$)/g, "").trim());
    }
    alert(cvelist);
    for (x in cvelist){
      jQuery('#'+cvelist[x]).removeClass('selected');
    }
    return false;
  });
});
